<!DOCTYPE html>
<!--  ========== Morse Code Web Chat ==========
      This single-file web page provides a front-end for sending text to a
      backend (Flask on http://127.0.0.1:5000) which translates / stores
      Morse-code messages.  It also polls the backend to display the most
      recent message every 3 s.  A small “signal-light” circle flashes when
      a message is sent for visual feedback.                           -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Morse Code Translator</title>

  <!-- ========== CSS (in-page for simplicity) ========== -->
  <style>
    /* ---------- Global page styling ---------- */
    body {
      font-family: 'Courier New', Courier, monospace;  /* retro terminal vibe   */
      background-color: #0a0a0a;                       /* dark theme background */
      color: #e0e0e0;                                  /* light gray text       */
      display: flex;                                   /* center page contents  */
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }

    /* ---------- Title ---------- */
    h1 {
      font-size: 2.5em;
      color: #fff;
      margin-bottom: 10px;
      text-shadow: 0 0 10px #fff;   /* subtle glow */
    }

    /* ---------- GIF container ---------- */
    .gif-container {                /* centers the image & adds spacing */
      margin: 20px 0;
    }
    .gif-container img {
      width: 220px;                 /* fixed width keeps layout stable  */
      border-radius: 10px;          /* soft rounded corners             */
      box-shadow: 0 0 20px #fff;    /* white glow around the GIF        */
    }

    /* ---------- Form / input styling ---------- */
    form {
      margin: 20px 0;
    }
    input[type="text"] {
      width: 300px;
      padding: 12px;
      font-size: 16px;
      border: 2px solid #fff;       /* white border for contrast        */
      background: #111;
      color: #fff;
      border-radius: 6px;
    }
    button {
      padding: 12px 20px;
      font-size: 16px;
      margin-left: 10px;
      background-color: #fff;       /* white button with black text     */
      color: #000;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    button:hover {                  /* highlight on hover               */
      background-color: #ff0000;
    }

    /* ---------- Received-message panel ---------- */
    #received {
      margin-top: 40px;
      padding: 20px;
      background: #111;
      border: 2px solid #fff;
      border-radius: 10px;
      width: 80%;
      max-width: 600px;
      box-shadow: 0 0 15px #ff0000; /* red glow matches send btn hover  */
    }
    #received h3 {
      margin-top: 0;
      color: #fff;
    }
    #receivedText {
      font-family: 'Courier New', monospace;
      font-size: 1.2em;
      white-space: pre-wrap;        /* preserve line breaks             */
      color: #ff0000;
    }

    /* ---------- Signal-light (visual flash) ---------- */
    .signal-light {
      margin-top: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #222;             /* dark circle when idle            */
      box-shadow: 0 0 10px #fff;    /* faint glow                      */
      transition: background 0.3s, box-shadow 0.3s;
    }
    .signal-light.on {              /* class toggled in JS (flash)      */
      background: #fff;             /* bright white                     */
      box-shadow: 0 0 20px #fff, 0 0 60px #fff;
    }
  </style>
</head>

<body>
  <!-- ========== Main content ========== -->
  <h1>Morse Code Web Chat</h1>

  <!-- Fun thematic GIF (Studio Ghibli signal lamp) -->
  <div class="gif-container">
    <img src="https://media1.tenor.com/m/0wNFACbg25wAAAAC/code-morse.gif" alt="Morse Code GIF">
  </div>

  <!-- Text-input form -->
  <form id="sendForm">
    <!-- Users type a plain-text message; backend handles Morse translation -->
    <input type="text" id="messageInput" placeholder="Enter message to send" required />
    <button type="submit">Send</button>
  </form>

  <!-- Circle that briefly lights up when a message is sent -->
  <div class="signal-light" id="lightIndicator"></div>

  <!-- Area that shows the last message the server stored -->
  <div id="received">
    <h3>Received Message:</h3>
    <pre id="receivedText">Waiting...</pre> <!-- updated via JS polling -->
  </div>

  <!-- ========== JavaScript (client logic) ========== -->
  <script>
    const SERVER_URL = "http://127.0.0.1:5000";
  
    async function sendMessage(msg) {
      const response = await fetch(`${SERVER_URL}/send`, {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: `msg=${encodeURIComponent(msg)}`
      });
      if (!response.ok) throw new Error(`HTTP ${response.status}`);
    }
  function flashLight(number) {
    
  }
    /* --- rest of your existing code, just call sendMessage() in the form handler --- */
    document.getElementById("sendForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      try {
        await sendMessage(messageInput.value);
        flashLight(500);
        messageInput.value = "";
      } catch (err) {
        alert("Error sending: " + err.message);
      }
    });
  
    /* polling logic unchanged */
  </script>
  
</body>
</html>
